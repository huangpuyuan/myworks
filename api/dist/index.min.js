!function(){"use strict";angular.module("myApp",["ui.router"]);var e=angular.module("myApp");e.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/main",templateUrl:"./view/main.html",controller:"myCtrl"}).state("detail",{url:"/detail/:id",templateUrl:"./view/detail.html",controller:"detailCtrl"}),t.otherwise("main")}]),e.controller("myCtrl",["$rootScope","$scope","$http","$state","$anchorScroll","$location",function(e,t,a,i,s,n){t.pageSize=4,t.selPage=1,a.get("data/data.php").then(function(a){t.list=a.data.data,e.listOfId=[],t.list.forEach(function(t){e.listOfId.push(parseInt(t.id))}),t.data=t.list,t.pages=Math.ceil(t.data.length/t.pageSize),t.pageOffset=2,t.newPages=t.pages>2*t.pageOffset+1?2*t.pageOffset+1:t.pages,t.pageList=[],t.setData=function(){t.items=t.data.slice(t.pageSize*(t.selPage-1),t.selPage*t.pageSize)},t.selectPage=function(e){if(!(e<1||e>t.pages)){var a=[];if(e<=t.pageOffset){for(var i=0;i<t.newPages;i++)a.push(i+1);t.pageList=a}else if(e>t.pageOffset&&e<=t.pages-t.pageOffset){for(var i=e-t.pageOffset-1;i<e+t.pageOffset;i++)a.push(i+1);t.pageList=a}else{for(var i=t.pages-t.newPages;i<t.pages;i++)a.push(i+1);t.pageList=a}t.selPage=e,t.setData(),t.isActivePage(e)}},t.enterEvent=function(e){13==(window.event?e.keyCode:e.which)&&t.gotoPage(t.inputPage)},t.gotoPage=function(e){!isNaN(e)&&e&&t.selectPage(parseInt(e))},t.isActivePage=function(e){return t.selPage==e},t.isFirstDisabled=function(e){return 1==t.selPage},t.isLastDisabled=function(e){return t.selPage==t.pages},t.firstPage=function(){t.selectPage(1)},t.lastPage=function(){t.selectPage(t.pages)},t.Previous=function(){t.selectPage(t.selPage-1)},t.Next=function(){t.selectPage(t.selPage+1)},t.selectPage(t.selPage),t.$watch("selPage",function(){s()})},function(e){})}]),e.controller("detailCtrl",["$rootScope","$scope","$http","$state","$timeout",function(e,t,a,i,s){var n=[];t.isNextDisabled=t.isPrevDisabled=!1,a.get("data/work.php?id="+i.params.id).then(function(e){e.data.code>=400&&i.go("main"),t.urlId=i.params.id,t.detail=e.data.data,t.intense()}),e.listOfId?n=e.listOfId:a.get("data/data.php").then(function(t){e.listOfId=[],t.data.data.forEach(function(t){e.listOfId.push(parseInt(t.id))}),n=e.listOfId}),s(function(){t.switchWork=function(e,a){if(a=a||1,n&&!isNaN(a)){if(0===a)return;var s=n[n.indexOf(parseInt(e))-a];s?i.go("detail",{id:s}):a>0?t.isNextDisabled=!0:t.isPrevDisabled=!0}}},200),t.intense=function(){var e=document.querySelectorAll(".demo-image");Intense(e)}}]),e.filter("to_trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),e.run(["$rootScope","$anchorScroll",function(e,t){e.$on("$stateChangeSuccess",function(){t()})}])}();